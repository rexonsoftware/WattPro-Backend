const express=require("express"),session=require("express-session");var cookieParser=require("cookie-parser");const helmet=require("helmet"),cors=require("cors"),bodyParser=require("body-parser"),dotenv=require("dotenv").config(),bcrypt=require("bcryptjs"),nodemailer=require("nodemailer"),path=require("path"),connection=require("./utils/database"),app=express();app.use(cors({origin:"*"})),app.use(cookieParser()),app.use(helmet({crossOriginResourcePolicy:!1})),app.disable("x-powered-by");const publicDir=path.join(__dirname,"/views/public");app.use(express.static(publicDir)),app.set("trust proxy",1);const expMinutes=10,expireTime=6e5;app.use(session({secret:"kuchbhisecrethay",resave:!1,saveUninitialized:!0,expires:new Date(Date.now()+6e5),cookie:{maxAge:6e5}})),app.use(express.urlencoded({extended:"true"})),app.use(bodyParser.json()),app.set("view engine","hbs");const apiRoutes=require("./routes/ApiRoutes"),nonApiRoutes=require("./routes/nonApiRoutes");app.use(express.json()),app.use("/api",apiRoutes),app.listen(process.env.PORT,(()=>{console.log("Server started on port "+process.env.PORT)}));